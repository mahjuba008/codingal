;/*FB_PKG_DELIM*/

__d("MDSShareSvgIcon.react",["MDSSvgIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M18.766 4.857a1 1 0 00-1.532 0L13.878 8.86a1 1 0 00.766 1.643H16.5a.25.25 0 01.25.25v10.75a1 1 0 001 1h.5a1 1 0 001-1v-10.75a.25.25 0 01.25-.25h1.856a1 1 0 00.766-1.643l-3.356-4.002z"}),f=i.jsx("path",{d:"M14.75 13.502a1 1 0 00-1-1H12.5a4 4 0 00-4 4v8.5a4 4 0 004 4h11a4 4 0 004-4v-8.5a4 4 0 00-4-4h-1.25a1 1 0 00-1 1v.5a1 1 0 001 1h1.25a1.5 1.5 0 011.5 1.5v8.5a1.5 1.5 0 01-1.5 1.5h-11a1.5 1.5 0 01-1.5-1.5v-8.5a1.5 1.5 0 011.5-1.5h1.25a1 1 0 001-1v-.5z"}),b[0]=e,b[1]=f):(e=b[0],f=b[1]);b[2]!==a?(e=i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[e,f]})),b[2]=a,b[3]=e):e=b[3];return e}g["default"]=a}),98);
__d("useMAWBulkMaybeAutoTriggerDownload",["MAWDownloadMediaInWorkerDeferred","MAWMediaDownloadStatus","MAWStateContext.react","gkx","justknobx","react","react-compiler-runtime","useAsyncReStore","useMAWBulkMediaDownloadStatus"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;b.useMemo;var k=b.useRef;function a(a,b){var e=d("react-compiler-runtime").c(10),f=c("useMAWBulkMediaDownloadStatus")(a),g;e[0]!==f?(g=new Map(f.map(l)),e[0]=f,e[1]=g):g=e[1];f=g;var h=f;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=new Map(),e[2]=g):g=e[2];var m=k(g),n=c("useAsyncReStore")(),o=i(d("MAWStateContext.react").MAWDispatchContext);e[3]!==a||e[4]!==n||e[5]!==o||e[6]!==h||e[7]!==b?(f=function(){var e=[];a.forEach(function(a){var f,g,i=a.attachment;a=a.mediaRenderQpl;f=(f=h.get(i.attachmentFbid))!=null?f:!1;g=(g=m.current.get(i.attachmentFbid))!=null?g:!1;f&&!g&&(m.current.set(i.attachmentFbid,!0),!c("justknobx")._("3226")?d("MAWDownloadMediaInWorkerDeferred").maybeDownloadMediaInWorker({attachment:i,dbPromise:n,dispatch:o,mediaRenderQpl:a,triggerUIView:b}):e.push({attachment:i,mediaRenderQpl:a}))});e.length>0&&d("MAWDownloadMediaInWorkerDeferred").maybeBulkDownloadMediaInWorker({attachmentsWithQpl:e,dbPromise:n,dispatch:o,triggerUIView:b})},g=[a,n,o,m,h,b],e[3]=a,e[4]=n,e[5]=o,e[6]=h,e[7]=b,e[8]=f,e[9]=g):(f=e[8],g=e[9]);j(f,g)}function l(a){var b;b=(a==null?void 0:(b=a.status)==null?void 0:b.mainMediaStatus)===c("MAWMediaDownloadStatus").MISSING_FILE||(a==null?void 0:(b=a.status)==null?void 0:b.mainMediaStatus)===c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE||c("gkx")("5850")&&(a==null?void 0:(b=a.status)==null?void 0:b.mainMediaStatus)===c("MAWMediaDownloadStatus").DOWNLOADING;return[a.attachment.attachmentFbid,b]}g["default"]=a}),98);
__d("MWChatAttachmentMediaState.react",["$InternalEnum","I64","LSIntEnum","MAWClientMediaStatusUtils","MAWVideoAudioPlaybackErrorHandlerUtils","MessagingAttachmentType","RavenMessagingState","ReQL","ReQLSuspense","cr:17327","cr:17328","filterNulls","react","react-compiler-runtime","useEmptyFunction","useMAWBulkMaybeAutoTriggerDownload","usePrevious","useReStore","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));e=i;var m=e.createContext;e.useCallback;var n=e.useEffect,o=e.useMemo,p=e.useState,q=(e=b("cr:17327"))!=null?e:c("useEmptyFunction"),r=(e=b("cr:17328"))!=null?e:c("useEmptyFunction"),s=b("$InternalEnum")({Image:0,Video:1}),t=m({canMoveBackward:!1,canMoveForward:!1,card:void 0,cards:[],currentIndex:0,moveBackward:function(){},moveForward:function(){},moveTo:function(){},numberOfCards:0,shouldTriggerLoadMore:!1});function u(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(j||(j=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))&&(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function v(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(j||(j=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))&&(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function w(a,b,c,d){return c?d.hasMedia:b(d,"isPlayableMedia")!=null&&a(d,"isPlayableMedia")!=null}function x(a,b,e,f){var g=f.attachmentType;return!w(a,b,e,f)?!1:u(f)||(j||(j=d("I64"))).equal(g,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function y(a,b,e,f,g,h){var i=f.attachmentFbid,l=f.attachmentType,m=!1,n=!1;if(d("MAWVideoAudioPlaybackErrorHandlerUtils").isVideoFallbackExperiencesEnabled({silent:!1})){h=d("MAWClientMediaStatusUtils").getStatusDataFromLsdbOrContext({clientMediaStatus:h,mediaDownloadStatusState:g,statusKey:i});g=h.hasStatus;i=h.statusData;if(g){g=(h=i)!=null?h:{};i=g.validationResult;m=i!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(f,i):!1;n=i!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(f,i):!1}}return!w(a,b,e,f)||m||n?!1:v(f)||(j||(j=d("I64"))).equal(l,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))}function z(a,b){n(function(){a.forEach(function(a){try{a.attachment.hasMedia&&b(a.attachment,"usePreloadThumbnails");return}catch(a){return}})},[a,b])}function A(a){var b=a.attachments,d=a.children,e=a.getIsSecureThread,f=a.getPlayableUrl,g=a.getPreviewUrl;a=a.initialAttachment;a=p(a);var h=a[0],i=a[1];a=c("usePrevious")(h==null?void 0:h.messageId);var j=q(),k=o(function(){return b.map(function(a){return{attachment:a,mediaRenderQpl:null,statusKey:a.attachmentFbid}})},[b]),m=r(k);c("useMAWBulkMaybeAutoTriggerDownload")(k,"fullsize");var n=o(function(){return c("filterNulls")(b.map(function(a){var b=e(a);if(x(f,g,b,a))return{attachment:a,type:s.Image};return y(f,g,b,a,j,m)?{attachment:a,type:s.Video}:null}))},[b,m,e,f,g,j]),u=h==null?-1:n.findIndex(function(a){return a.attachment.attachmentFbid===h.attachmentFbid&&a.attachment.messageId===h.messageId}),v=a!=null&&(h==null?void 0:h.messageId)!==a&&u>n.length-5;z(n,g);k=o(function(){var a=Math.max(0,n.length-1);return{canMoveBackward:u>0&&u!==-1,canMoveForward:u<a&&u!==-1,card:n[u],cards:n,currentIndex:u,moveBackward:function(){var a=Math.max(u-1,0);i((a=n[a])==null?void 0:a.attachment)},moveForward:function(){var b=Math.min(u+1,a);i((b=n[b])==null?void 0:b.attachment)},moveTo:function(a){i(a.attachment)},numberOfCards:n.length,shouldTriggerLoadMore:v}},[n,u,v]);return l.jsx(t.Provider,{value:k,children:d})}A.displayName=A.name+" [from "+f.id+"]";function a(a){var b=d("react-compiler-runtime").c(28),e=a.attachmentFbid,g=a.children,i=a.getPlayableUrl,j=a.getPreviewUrl,k=a.isSecureThread,m=a.threadKey;c("vulture")("SQUu5DBRrDsh1pluf1mTgMML8vU=");var n=q(),o=(h||(h=c("useReStore")))();b[0]!==e||b[1]!==o.tables.attachments||b[2]!==m?(a=function(){return d("ReQL").fromTableAscending(o.tables.attachments).getKeyRange(m).filter(function(a){return a.attachmentFbid===e})},b[0]=e,b[1]=o.tables.attachments,b[2]=m,b[3]=a):a=b[3];var p;b[4]!==e||b[5]!==o||b[6]!==m?(p=[o,m,e],b[4]=e,b[5]=o,b[6]=m,b[7]=p):p=b[7];a=d("ReQLSuspense").useFirst(a,p,f.id+":365");var r;b[8]!==o.tables.attachments||b[9]!==o.tables.client_media_status||b[10]!==i||b[11]!==j||b[12]!==k||b[13]!==n||b[14]!==m?(p=function(){return d("ReQL").fromTableAscending(o.tables.attachments).getKeyRange(m).filter(function(a){var b=n==null?d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(o.tables.client_media_status).getKeyRange(a.attachmentFbid),f.id+":380"):void 0;return x(i,j,k,a)||y(i,j,k,a,n,b)})},r=[o.tables.attachments,o.tables.client_media_status,m,n,i,j,k],b[8]=o.tables.attachments,b[9]=o.tables.client_media_status,b[10]=i,b[11]=j,b[12]=k,b[13]=n,b[14]=m,b[15]=p,b[16]=r):(p=b[15],r=b[16]);p=d("ReQLSuspense").useArray(p,r,f.id+":373");b[17]!==p?(r=[].concat(p).sort(B),b[17]=p,b[18]=r):r=b[18];p=r;r=p;b[19]!==k?(p=function(){return k},b[19]=k,b[20]=p):p=b[20];p=p;var s;b[21]!==a||b[22]!==g||b[23]!==p||b[24]!==i||b[25]!==j||b[26]!==r?(s=l.jsx(A,{attachments:r,getIsSecureThread:p,getPlayableUrl:i,getPreviewUrl:j,initialAttachment:a,children:g}),b[21]=a,b[22]=g,b[23]=p,b[24]=i,b[25]=j,b[26]=r,b[27]=s):s=b[27];return s}function B(a,b){return(j||(j=d("I64"))).compare(b.timestampMs,a.timestampMs)}g.AttachmentMediaType=s;g.context=t;g.MWChatAttachmentMediaStateProviderFromAttachments=A;g.MWChatAttachmentMediaStateProvider=a}),98);
__d("MWChatAttachmentMediaNavigationHotkeys.react",["fbt","CometKeys","MWChatAttachmentMediaState.react","justknobx","react","react-compiler-runtime","useLayerKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext;b.useMemo;var l={key:c("CometKeys").LEFT},m={key:c("CometKeys").RIGHT},n={key:c("CometKeys").ESCAPE},o=h._(/*BTDS*/"__JHASH__6tFY25IlnV4__JHASH__"),p=h._(/*BTDS*/"__JHASH__HYvhkJNYo2M__JHASH__"),q=h._(/*BTDS*/"__JHASH__mWoEKBNqFLb__JHASH__");function a(a){var b=d("react-compiler-runtime").c(12),e=a.children;a=a.onClose;var f=k(d("MWChatAttachmentMediaState.react").context),g=f.moveBackward;f=f.moveForward;var h;b[0]!==g?(h={command:l,description:o,handler:g},b[0]=g,b[1]=h):h=b[1];b[2]!==f?(g={command:m,description:p,handler:f},b[2]=f,b[3]=g):g=b[3];b[4]!==a?(f=a!=null?{command:n,description:q,handler:a}:null,b[4]=a,b[5]=f):f=b[5];b[6]!==h||b[7]!==g||b[8]!==f?(a=[h,g,f].filter(Boolean),b[6]=h,b[7]=g,b[8]=f,b[9]=a):a=b[9];h=a;g=h;c("useLayerKeyCommands")(g);if(b[10]!==e){h=c("justknobx")._("3491")?j.jsx(j.Fragment,{children:(f=e)!=null?f:null}):j.jsx("div",{children:(a=e)!=null?a:null});b[10]=e;b[11]=h}else h=b[11];return h}g.keyLeft=l;g.keyRight=m;g.keyEscape=n;g.MWChatAttachmentMediaNavigationHotkeys=a}),226);
__d("MWChatAttachmentMediaThumbnails.react",["CometMediaViewerFilmstrip.react","CometPlaceholder.react","MWChatAttachmentMediaState.react","MWV2MediaViewerContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useDeferredValue;function l(a){var b=a.card,c=a.getPlayableUrl;a=a.getPreviewUrl;var e=b.attachment,f,g="/images/comet/gray.png";if(e.hasMedia===!1)f=g;else{f=(a=a(e,"toFilmstripThumbnail"))!=null?a:g}a=f;b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Video&&!Boolean(f)&&(a=c(e,"toFilmstripThumbnail"));if(b.type===d("MWChatAttachmentMediaState.react").AttachmentMediaType.Image){return{alt:(g=e.accessibilitySummaryText)!=null?g:"",backgroundColor:void 0,height:0,isUseImageResizing:void 0,mediaType:"image",uri:f,width:0}}return{height:0,mediaType:"video",thumbnailUri:f,uri:a,width:0}}function m(a){var b,e=d("react-compiler-runtime").c(23),f=a.activeCard,g=a.cards,h=a.getPreviewUrl,k=a.onSetImage,m=j(d("MWV2MediaViewerContext.react").context);e[0]!==m?(a=function(a,b){return a==null?"":(a=m.getDownloadUrl(a,b))!=null?a:""},e[0]=m,e[1]=a):a=e[1];var n=a;if(e[2]!==g||e[3]!==n||e[4]!==h){e[6]!==n||e[7]!==h?(a=function(a){return l({card:a,getPlayableUrl:n,getPreviewUrl:h})},e[6]=n,e[7]=h,e[8]=a):a=e[8];a=g.map(a);e[2]=g;e[3]=n;e[4]=h;e[5]=a}else a=e[5];a=a;if(e[9]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid)||e[10]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.messageId)||e[11]!==g){if(e[13]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid)||e[14]!==(f==null?void 0:(b=f.attachment)==null?void 0:b.messageId)){var o;b=function(a){var b;return a.attachment.attachmentFbid===(f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid)&&a.attachment.messageId===(f==null?void 0:(b=f.attachment)==null?void 0:b.messageId)};e[13]=f==null?void 0:(o=f.attachment)==null?void 0:o.attachmentFbid;e[14]=f==null?void 0:(o=f.attachment)==null?void 0:o.messageId;e[15]=b}else b=e[15];o=g.findIndex(b);e[9]=f==null?void 0:(b=f.attachment)==null?void 0:b.attachmentFbid;e[10]=f==null?void 0:(b=f.attachment)==null?void 0:b.messageId;e[11]=g;e[12]=o}else o=e[12];b=o;e[16]!==g||e[17]!==k?(o=function(a){return k(g[a])},e[16]=g,e[17]=k,e[18]=o):o=e[18];var p;e[19]!==b||e[20]!==a||e[21]!==o?(p=i.jsx(c("CometMediaViewerFilmstrip.react"),{activeIndex:b,images:a,onSetImage:o}),e[19]=b,e[20]=a,e[21]=o,e[22]=p):p=e[22];return p}function a(a){var b=d("react-compiler-runtime").c(6);a=a.getPreviewUrl;var e=j(d("MWChatAttachmentMediaState.react").context),f=e.card,g=e.cards;e=e.moveTo;g=k(g);var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h={className:"xdj266r xkrivgy xat24cr x1gryazu x193iq5w x6ikm8r x10wlt62"},b[0]=h):h=b[0];b[1]!==f||b[2]!==g||b[3]!==a||b[4]!==e?(h=i.jsx("div",babelHelpers["extends"]({},h,{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatAttachmentMediaThumbnails",children:i.jsx(m,{activeCard:f,cards:g,getPreviewUrl:a,onSetImage:e})})})),b[1]=f,b[2]=g,b[3]=a,b[4]=e,b[5]=h):h=b[5];return h}g["default"]=a}),98);
__d("MWChatForwardCircleButton.react",["fbt","FDSCircleButton.react","MDSShareSvgIcon.react","ODS","SVGIcon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.color,f=a.onOpenForwardDialog;a=a.type;var g;b[0]!==e?(g=d("SVGIcon").legacySVGIcon(function(){return k.jsx(c("MDSShareSvgIcon.react"),{color:e,size:24})}),b[0]=e,b[1]=g):g=b[1];var i;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"__JHASH__GvPr2MwluxY__JHASH__"),b[2]=i):i=b[2];var l;b[3]!==f?(l=function(){(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),f()},b[3]=f,b[4]=l):l=b[4];bb0:{switch(a){case"deemphasized":a="deemphasized";break bb0;case"normal":a="normal";break bb0;case"overlay":a="overlay";break bb0;case"dark_overlay":a="dark-overlay";break bb0;case"deemphasized_overlay":case"overlay_raised":a="overlay-raised";break bb0;case"primary_background_overlay":a="primary-background-overlay";break bb0}a=void 0}b[5]!==g||b[6]!==l||b[7]!==a?(i=k.jsx(c("FDSCircleButton.react"),{icon:g,label:i,onPress:l,size:36,testid:void 0,type_DEPRECATED:a}),b[5]=g,b[6]=l,b[7]=a,b[8]=i):i=b[8];return i}g["default"]=a}),226);
__d("MWChatMediaViewerControls.react",["fbt","ix","FDSCircleButton.react","FDSTooltip.react","Int64Hooks","LSFactory","LSIntEnum","LSMessagePointQueryStoredProcedure","LSVerifyThreadRowExistsStoredProcedure","MWChatMessageId","MWXRow.react","MWXRowItem.react","ODS","ReQL","ReQLSuspense","emptyFunction","fbicon","promiseDone","react","react-compiler-runtime","useMWChatForward","useMWV2ForwardMessage","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));m.useCallback;var o=h._(/*BTDS*/"__JHASH__yVgFxyhzJWR__JHASH__"),p=h._(/*BTDS*/"__JHASH__GvPr2MwluxY__JHASH__");function q(a,b){var e=d("react-compiler-runtime").c(18),g=(j||(j=c("useReStore")))(),h,i;e[0]!==g||e[1]!==b?(h=function(){return b!=null?d("ReQL").fromTableAscending(g.tables.threads,["threadType"]).getKeyRange(b).map(r):d("ReQL").empty()},i=[g,b],e[0]=g,e[1]=b,e[2]=h,e[3]=i):(h=e[2],i=e[3]);var l=d("ReQLSuspense").useFirst(h,i,f.id+":61");e[4]!==g||e[5]!==a?(h=function(){return a!=null?d("ReQL").fromTableAscending(g.tables.messages.index("messageId")).getKeyRange(a):d("ReQL").empty()},i=[g,a],e[4]=g,e[5]=a,e[6]=h,e[7]=i):(h=e[6],i=e[7]);var m=d("ReQLSuspense").useFirst(h,i,f.id+":73");e[8]!==g||e[9]!==m||e[10]!==a||e[11]!==l||e[12]!==b?(h=function(){if(a==null||b==null)return;if(l==null){c("promiseDone")(g.runInTransaction(function(a){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(a),{syncGroup:(k||(k=d("LSIntEnum"))).ofNumber(1),threadKey:b})},"readwrite",void 0,void 0,f.id+":89"));return}m==null&&c("promiseDone")(g.runInTransaction(function(d){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(d),{messageId:a,threadKey:b,threadType:l})},"readwrite",void 0,void 0,f.id+":102"))},i=[g,m,a,l,b],e[8]=g,e[9]=m,e[10]=a,e[11]=l,e[12]=b,e[13]=h,e[14]=i):(h=e[13],i=e[14]);d("Int64Hooks").useEffectInt64(h,i);e[15]!==m||e[16]!==l?(h=[m,l],e[15]=m,e[16]=l,e[17]=h):h=e[17];return h}function r(a){a=a.threadType;return a}function a(a){var b=d("react-compiler-runtime").c(11),e=a.attachmentID,f=a.canForward,g=a.downloadLink,h=a.isCrossTransportForwardEnabled,j=a.isSecureForwardEnabled;a=a.messageID;f=f===void 0?!0:f;h=h===void 0?!1:h;j=j===void 0?!1:j;var k;b[0]!==g?(k=g!=null?n.jsx(c("MWXRowItem.react"),{children:n.jsx(c("FDSTooltip.react"),{align:"middle",tooltip:o,children:n.jsx(c("FDSCircleButton.react"),{icon:d("fbicon")._(i("1433212"),20),label:o,linkProps:{download:!0,target:"_blank",url:g},size:36,type:"secondary-on-media"})})}):null,b[0]=g,b[1]=k):k=b[1];b[2]!==e||b[3]!==f||b[4]!==h||b[5]!==j||b[6]!==a?(g=f===!0?n.jsx(c("MWXRowItem.react"),{children:n.jsx(c("FDSTooltip.react"),{align:"middle",tooltip:p,children:n.jsx(t,{attachmentID:e,isCrossTransportForwardEnabled:h,isSecureForwardEnabled:j,messageID:a})})}):null,b[2]=e,b[3]=f,b[4]=h,b[5]=j,b[6]=a,b[7]=g):g=b[7];b[8]!==k||b[9]!==g?(e=n.jsxs(c("MWXRow.react"),{paddingTop:0,spacing:8,children:[k,g]}),b[8]=k,b[9]=g,b[10]=e):e=b[10];return e}function s(a){var b=d("react-compiler-runtime").c(9),e=a.isCrossTransportForwardEnabled,f=a.isSecureForwardEnabled,g=a.messageID;a=a.onForwardSend;e=e===void 0?!1:e;f=f===void 0?!1:f;f=f?"secure":e?"cross_transport":"open_";b[0]!==f||b[1]!==g||b[2]!==a?(e={forwardDialogType:f,messageID:g,onClose:c("emptyFunction"),onSend:a},b[0]=f,b[1]=g,b[2]=a,b[3]=e):e=b[3];var h=c("useMWChatForward")(e);b[4]!==h?(f=function(){(l||(l=d("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),h&&h.onClick()},b[4]=h,b[5]=f):f=b[5];var j=f;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("fbicon")._(i("484396"),20),b[6]=g):g=b[6];b[7]!==j?(a=n.jsx(c("FDSCircleButton.react"),{icon:g,label:p,onPress:function(a){return j()},size:36,testid:void 0,type:"secondary-on-media"}),b[7]=j,b[8]=a):a=b[8];return a}function t(a){var b=d("react-compiler-runtime").c(11),c=a.attachmentID,e=a.isCrossTransportForwardEnabled,f=a.isSecureForwardEnabled;a=a.messageID;e=e===void 0?!1:e;f=f===void 0?!1:f;var g;b[0]!==a?(g=d("MWChatMessageId").getMessageId(a),b[0]=a,b[1]=g):g=b[1];g=g;var h;b[2]!==a?(h=d("MWChatMessageId").getThreadId(a),b[2]=a,b[3]=h):h=b[3];h=h;g=q(g,h);h=g[0];g=g[1];if(h==null||g==null)return null;var i;b[4]!==c||b[5]!==e||b[6]!==f||b[7]!==h||b[8]!==a||b[9]!==g?(i=n.jsx(u,{attachmentID:c,isCrossTransportForwardEnabled:e,isSecureForwardEnabled:f,message:h,messageID:a,messageThreadType:g}),b[4]=c,b[5]=e,b[6]=f,b[7]=h,b[8]=a,b[9]=g,b[10]=i):i=b[10];return i}function u(a){var b=d("react-compiler-runtime").c(7),e=a.attachmentID,f=a.isCrossTransportForwardEnabled,g=a.isSecureForwardEnabled,h=a.message,i=a.messageID;a=a.messageThreadType;f=f===void 0?!1:f;g=g===void 0?!1:g;var j=d("useMWV2ForwardMessage").useMWV2ForwardMessage(h,a,e);b[0]!==j?(h=function(a){return c("promiseDone")(j(a))},b[0]=j,b[1]=h):h=b[1];a=h;b[2]!==f||b[3]!==g||b[4]!==i||b[5]!==a?(e=n.jsx(s,{isCrossTransportForwardEnabled:f,isSecureForwardEnabled:g,messageID:i,onForwardSend:a}),b[2]=f,b[3]=g,b[4]=i,b[5]=a,b[6]=e):e=b[6];return e}g["default"]=a}),226);
__d("MWMediaViewerRenderQpl",["MWMediaRenderQplUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MWMediaRenderQplUtils").useCommonMediaRenderQplForAttachment(a,b,"full_screen_view")}g.useMediaViewerRenderQpl=a}),98);
__d("MWV2MediaViewerControls.react",["fbt","ix","FDSCircleButton.react","Int64Hooks","LSMessagingThreadTypeUtil","MDSRow.react","MDSRowItem.react","MWChatForwardCircleButton.react","MWV2MediaViewerContext.react","MWXTooltip.react","fbicon","react","react-compiler-runtime","useMWHasForwardAction","useMWV2MessageForwardAction"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext,m=h._(/*BTDS*/"__JHASH__yVgFxyhzJWR__JHASH__");function a(a){var b=d("react-compiler-runtime").c(15),e=a.attachment,f=a.message,g=a.onClose;a=a.thread;var j=l(d("MWV2MediaViewerContext.react").context),o;b[0]!==e||b[1]!==j?(o=j.getDownloadUrl(e,"MWV2MediaViewerControls"),b[0]=e,b[1]=j,b[2]=o):o=b[2];j=o;b[3]!==j?(o=j!=null?k.jsx(c("MDSRowItem.react"),{children:k.jsx(c("MWXTooltip.react"),{tooltip:m,children:k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:d("fbicon")._(i("1873235"),16),label:m,linkProps:{download:!0,target:"_blank",url:j},size:36,type_DEPRECATED:"dark-overlay"})})}):null,b[3]=j,b[4]=o):o=b[4];b[5]!==e||b[6]!==f||b[7]!==a?(j=f!=null?k.jsx(n,{attachment:e,message:f,thread:a}):null,b[5]=e,b[6]=f,b[7]=a,b[8]=j):j=b[8];b[9]!==g?(e=g!=null?k.jsx(c("MDSRowItem.react"),{children:k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:d("fbicon")._(i("478232"),16),label:h._(/*BTDS*/"__JHASH__gaxHiFwvIGk__JHASH__"),onPress:g,size:36,type_DEPRECATED:"dark-overlay"})}):null,b[9]=g,b[10]=e):e=b[10];b[11]!==o||b[12]!==j||b[13]!==e?(f=k.jsxs(c("MDSRow.react"),{paddingTop:0,spacing:8,children:[o,j,e]}),b[11]=o,b[12]=j,b[13]=e,b[14]=f):f=b[14];return f}function n(a){var b=d("react-compiler-runtime").c(9),e=a.attachment,f=a.message,g=a.thread;a=e==null?void 0:e.attachmentFbid;var i;b[0]!==g.threadType?(i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),b[0]=g.threadType,b[1]=i):i=b[1];i=i;var j,l;b[2]!==g.threadType?(j=function(){return g.threadType},l=[g.threadType],b[2]=g.threadType,b[3]=j,b[4]=l):(j=b[3],l=b[4]);j=d("Int64Hooks").useMemoInt64(j,l);l=c("useMWV2MessageForwardAction")(i,f,j);i=c("useMWHasForwardAction")(g.threadType,f,e);j=i.shouldShowForwardAction;if(a==null||!j)return null;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"__JHASH__GvPr2MwluxY__JHASH__"),b[5]=f):f=b[5];b[6]!==a||b[7]!==l?(e=k.jsx(c("MDSRowItem.react"),{children:k.jsx(c("MWXTooltip.react"),{tooltip:f,children:k.jsx(c("MWChatForwardCircleButton.react"),{attachmentID:a,color:"white",onOpenForwardDialog:l,type:"dark_overlay"})})}),b[6]=a,b[7]=l,b[8]=e):e=b[8];return e}g["default"]=a}),226);
__d("MWV2MediaViewerControlsV2.react",["fbt","ix","CometPlaceholder.react","FDSCircleButton.react","Int64Hooks","LSMessagingThreadTypeUtil","MDSRow.react","MDSRowItem.react","MWChatForwardCircleButton.react","MWV2MediaViewerContext.react","MWXTooltip.react","fbicon","react","react-compiler-runtime","useMWHasForwardAction","useMWV2MessageForwardAction"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useContext,m=h._(/*BTDS*/"__JHASH__yVgFxyhzJWR__JHASH__"),n=h._(/*BTDS*/"__JHASH__Esq9RFVvAsB__JHASH__");function o(a){var b=d("react-compiler-runtime").c(9);a=a.attachment;var e=l(d("MWV2MediaViewerContext.react").context),f;b[0]!==a||b[1]!==e?(f=e.getDownloadUrl(a,"MWV2MediaViewerControls"),b[0]=a,b[1]=e,b[2]=f):f=b[2];a=f;if(a==null)return null;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("fbicon")._(i("1873235"),16),b[3]=e):e=b[3];b[4]!==a?(f={download:!0,target:"_blank",url:a},b[4]=a,b[5]=f):f=b[5];b[6]!==e||b[7]!==f?(a=k.jsx(c("MWXTooltip.react"),{tooltip:m,children:k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:e,label:m,linkProps:f,size:36,type_DEPRECATED:"dark-overlay"})}),b[6]=e,b[7]=f,b[8]=a):a=b[8];return a}function p(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx(c("MWXTooltip.react"),{tooltip:m,children:k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",disabled:!0,icon:d("fbicon")._(i("1873235"),16),label:n,size:36,type_DEPRECATED:"dark-overlay"})}),a[0]=b):b=a[0];return b}function a(a){var b=d("react-compiler-runtime").c(13),e=a.attachment,f=a.message,g=a.onClose;a=a.thread;var j;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(j=k.jsx(p,{}),b[0]=j):j=b[0];b[1]!==e?(j=k.jsx(c("MDSRowItem.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:j,children:k.jsx(o,{attachment:e})})}),b[1]=e,b[2]=j):j=b[2];var l;b[3]!==e||b[4]!==f||b[5]!==a?(l=f!=null?k.jsx(q,{attachment:e,message:f,thread:a}):null,b[3]=e,b[4]=f,b[5]=a,b[6]=l):l=b[6];b[7]!==g?(e=g!=null?k.jsx(c("MDSRowItem.react"),{children:k.jsx(c("FDSCircleButton.react"),{color_DEPRECATED:"white",icon:d("fbicon")._(i("478232"),16),label:h._(/*BTDS*/"__JHASH__gaxHiFwvIGk__JHASH__"),onPress:g,size:36,type_DEPRECATED:"dark-overlay"})}):null,b[7]=g,b[8]=e):e=b[8];b[9]!==j||b[10]!==l||b[11]!==e?(f=k.jsxs(c("MDSRow.react"),{paddingTop:0,spacing:8,children:[j,l,e]}),b[9]=j,b[10]=l,b[11]=e,b[12]=f):f=b[12];return f}function q(a){var b=d("react-compiler-runtime").c(9),e=a.attachment,f=a.message,g=a.thread;a=e==null?void 0:e.attachmentFbid;var i;b[0]!==g.threadType?(i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),b[0]=g.threadType,b[1]=i):i=b[1];i=i;var j,l;b[2]!==g.threadType?(j=function(){return g.threadType},l=[g.threadType],b[2]=g.threadType,b[3]=j,b[4]=l):(j=b[3],l=b[4]);j=d("Int64Hooks").useMemoInt64(j,l);l=c("useMWV2MessageForwardAction")(i,f,j);i=c("useMWHasForwardAction")(g.threadType,f,e);j=i.shouldShowForwardAction;if(a==null||!j)return null;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"__JHASH__GvPr2MwluxY__JHASH__"),b[5]=f):f=b[5];b[6]!==a||b[7]!==l?(e=k.jsx(c("MDSRowItem.react"),{children:k.jsx(c("MWXTooltip.react"),{tooltip:f,children:k.jsx(c("MWChatForwardCircleButton.react"),{attachmentID:a,color:"white",onOpenForwardDialog:l,type:"dark_overlay"})})}),b[6]=a,b[7]=l,b[8]=e):e=b[8];return e}g["default"]=a}),226);
__d("MWV2MediaViewerControlsContainer.react",["CometPlaceholder.react","MWV2MediaViewerControls.react","MWV2MediaViewerControlsFallback.react","MWV2MediaViewerControlsV2.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(5),e=a.attachment,f=a.message,g=a.onClose;a=a.thread;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=c("gkx")("11885")?i.jsx(c("MWV2MediaViewerControlsV2.react"),{attachment:e,message:f,onClose:g,thread:a}):i.jsx(c("CometPlaceholder.react"),{fallback:g!=null?i.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:g}):null,name:"MWV2MediaViewerContent.Controls",children:i.jsx(c("MWV2MediaViewerControls.react"),{attachment:e,message:f,onClose:g,thread:a})}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g["default"]=a}),98);
__d("MWV2MediaViewerItemVideo.react",["MWChatVideoPlayer.react","MWV2MediaViewerContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=d("react-compiler-runtime").c(9),e=a.attachment;a=a.mediaRenderQpl;var f=j(d("MWV2MediaViewerContext.react").context);f=f.getPlayableUrl;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=f(e,"MediaViewerVideo",a),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];f=g;if(f!=null){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g={className:"x78zum5 x1iyjqo2 xmz0i5r"},b[4]=g):g=b[4];b[5]!==e.attachmentFbid||b[6]!==a||b[7]!==f?(g=i.jsx("div",babelHelpers["extends"]({},g,{children:i.jsx(c("MWChatVideoPlayer.react"),{controls:"mwchat",fbid:e.attachmentFbid,hideExpandButton:!1,isMediaViewer:!0,mediaRenderQpl:a,originalHeight:1e3,originalWidth:1e3,sdSrc:f,shouldForcePauseOnClick:!1})})),b[5]=e.attachmentFbid,b[6]=a,b[7]=f,b[8]=g):g=b[8];return g}else{a.endFail("missing-playable-url");return null}}g["default"]=a}),98);
__d("MWV2MediaViewerNullState.react",["fbt","CometColumn.react","CometColumnItem.react","FDSNullState.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("CometColumn.react"),{expanding:!0,verticalAlign:"center",children:j.jsx(c("CometColumnItem.react"),{children:j.jsx(c("FDSNullState.react"),{headline:h._(/*BTDS*/"__JHASH__f1n8ff4Nrlh__JHASH__")})})}),a[0]=b):b=a[0];return b}g["default"]=a}),226);
__d("MWV2MediaViewerItem.react",["I64","LSIntEnum","MWMediaViewerRenderQpl","MWV2MediaViewerItemVideo.react","MWV2MediaViewerNullState.react","MessagingAttachmentType","cr:10022","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=d("react-compiler-runtime").c(11),e=a.attachment,f=a.onClose;a=a.threadType;if(e==null){var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("MWV2MediaViewerNullState.react"),{}),b[0]=g):g=b[0];return g}g=e.attachmentType;if(!((i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))){b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("MWV2MediaViewerNullState.react"),{}),b[1]=g):g=b[1];return g}b[2]!==f?(g=c("gkx")("6691")&&k.jsx("div",babelHelpers["extends"]({"aria-hidden":!0},{className:"x1ey2m1c xds687c x17qophe x10l6tqk x13vifvy"},{"data-testid":void 0,onClick:f})),b[2]=f,b[3]=g):g=b[3];var h;b[4]!==e||b[5]!==f||b[6]!==a?(h=k.jsx(l,{attachment:e,onClose:f,threadType:a}),b[4]=e,b[5]=f,b[6]=a,b[7]=h):h=b[7];b[8]!==g||b[9]!==h?(e=k.jsxs(k.Fragment,{children:[g,h]}),b[8]=g,b[9]=h,b[10]=e):e=b[10];return e}function l(a){var e=d("react-compiler-runtime").c(5),f=a.attachment,g=a.onClose;a=a.threadType;a=d("MWMediaViewerRenderQpl").useMediaViewerRenderQpl(f,a);var h=f.attachmentType,l;e[0]!==f||e[1]!==a||e[2]!==g||e[3]!==h?(l=(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?k.jsx(b("cr:10022"),{attachment:f,mediaRenderQpl:a,onClickOutsideOfImage:g}):(i||(i=d("I64"))).equal(h,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))?k.jsx(c("MWV2MediaViewerItemVideo.react"),{attachment:f,mediaRenderQpl:a}):null,e[0]=f,e[1]=a,e[2]=g,e[3]=h,e[4]=l):l=e[4];return l}g["default"]=a}),98);
__d("MWV2MediaViewerContent.react",["fbt","CometHideLayerOnEscape.react","CometPlaceholder.react","FDSBlurredBackgroundImage.react","I64","LSIntEnum","MWChatAttachmentMediaNavigationHotkeys.react","MWChatAttachmentMediaState.react","MWChatAttachmentMediaThumbnails.react","MWChatMediaViewerNavigationTapTarget.react","MWV2MediaViewerContainer.react","MWV2MediaViewerContext.react","MWV2MediaViewerControlsContainer.react","MWV2MediaViewerItem.react","MWXColumn.react","MWXColumnItem.react","MWXRow.react","MWXRowItem.react","MessagingAttachmentType","ReQL","ReQLSuspense","gkx","justknobx","react","react-compiler-runtime","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useContext,o=b.useEffect,p={mediaItem:{marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},mediaRow:{minHeight:"x2lwn1j",$$css:!0},noOverflow:{maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function q(a){var b=d("react-compiler-runtime").c(6);a=a.attachment;var e=n(d("MWV2MediaViewerContext.react").context);e=e.getPreviewUrl;var f;b[0]!==a||b[1]!==e?(f=e(a,"BlurredBackground"),b[0]=a,b[1]=e,b[2]=f):f=b[2];e=f;if(e!=null&&a!=null&&!(k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x1ey2m1c xds687c x17qophe xuzhngd x10l6tqk x13vifvy"},b[3]=f):f=b[3];b[4]!==e?(a=m.jsx("div",babelHelpers["extends"]({},f,{children:m.jsx(c("FDSBlurredBackgroundImage.react"),{src:e})})),b[4]=e,b[5]=a):a=b[5];return a}else return null}function a(a){var b=d("react-compiler-runtime").c(66),e=a.initialAttachment,g=a.onClose,j=a.shouldShowMessengerLogo;a=a.thread;var k=n(d("MWChatAttachmentMediaState.react").context),l=k.canMoveBackward,r=k.canMoveForward,s=k.card,t=k.moveBackward,u=k.moveForward;k=k.shouldTriggerLoadMore;var v=n(d("MWV2MediaViewerContext.react").context),w=v.getPreviewUrl,x=v.loadMore,y=(i||(i=c("useReStore")))(),z=e==null?void 0:e.threadKey,A=e==null?void 0:e.messageId;b[0]!==y.tables.attachments||b[1]!==A||b[2]!==z?(v=function(){return d("ReQL").fromTableDescending(y.tables.attachments).getKeyRange(z,A)},b[0]=y.tables.attachments,b[1]=A,b[2]=z,b[3]=v):v=b[3];var B;b[4]!==y||b[5]!==A||b[6]!==z?(B=[y,A,z],b[4]=y,b[5]=A,b[6]=z,b[7]=B):B=b[7];v=d("ReQLSuspense").useFirst(v,B,f.id+":108")!=null;var C=s!=null?s.attachment:v?e:void 0;b[8]!==C||b[9]!==y.tables.messages?(B=function(){return(C==null?void 0:C.messageId)==null?d("ReQL").empty():d("ReQL").fromTableAscending(y.tables.messages.index("messageId")).getKeyRange(C.messageId)},b[8]=C,b[9]=y.tables.messages,b[10]=B):B=b[10];s=C==null?void 0:C.messageId;b[11]!==y.tables.messages||b[12]!==s?(v=[s,y.tables.messages],b[11]=y.tables.messages,b[12]=s,b[13]=v):v=b[13];e=d("ReQLSuspense").useFirst(B,v,f.id+":124");var D=k;b[14]!==x||b[15]!==D?(s=function(){D&&x()},B=[D,x],b[14]=x,b[15]=D,b[16]=s,b[17]=B):(s=b[16],B=b[17]);o(s,B);v=c("gkx")("1775");k=c("useShouldShowUnsupportedCodecFallback")(C);s=c("useShouldShowPlaybackErrorFallback")(C);b[18]!==C||b[19]!==s||b[20]!==k||b[21]!==g||b[22]!==a?(B=!k&&!s?m.jsx(c("MWV2MediaViewerItem.react"),{attachment:C,onClose:g,threadType:a.threadType}):null,b[18]=C,b[19]=s,b[20]=k,b[21]=g,b[22]=a,b[23]=B):B=b[23];s=B;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(k=c("justknobx")._("3491"),b[24]=k):k=b[24];B=k;b[25]!==C||b[26]!==e||b[27]!==g||b[28]!==a?(k=m.jsx(c("MWV2MediaViewerControlsContainer.react"),{attachment:C,message:e,onClose:g,thread:a}),b[25]=C,b[26]=e,b[27]=g,b[28]=a,b[29]=k):k=b[29];b[30]!==g?(e=B?null:m.jsx(d("MWChatAttachmentMediaNavigationHotkeys.react").MWChatAttachmentMediaNavigationHotkeys,{onClose:v?g:void 0}),b[30]=g,b[31]=e):e=b[31];b[32]!==C?(a=m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.BlurredBackground",children:m.jsx(q,{attachment:C})}),b[32]=C,b[33]=a):a=b[33];var E;b[34]===Symbol["for"]("react.memo_cache_sentinel")?(E=[p.mediaRow,v&&p.noOverflow],b[34]=E):E=b[34];l=!l;var F;b[35]===Symbol["for"]("react.memo_cache_sentinel")?(F=h._(/*BTDS*/"__JHASH__LwpPfoJWBJ-__JHASH__"),b[35]=F):F=b[35];b[36]!==t||b[37]!==l?(F=m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:"previous",invisible:l,label:F,onClick:t,testid:void 0})}),b[36]=t,b[37]=l,b[38]=F):F=b[38];b[39]!==s?(t=m.jsx(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"stretch",xstyle:v&&p.mediaItem,children:m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2MediaViewerContent.MediaContent",children:s})}),b[39]=s,b[40]=t):t=b[40];l=!r;b[41]===Symbol["for"]("react.memo_cache_sentinel")?(s=h._(/*BTDS*/"__JHASH__37s-bUHecpV__JHASH__"),b[41]=s):s=b[41];b[42]!==u||b[43]!==l?(r=m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("MWChatMediaViewerNavigationTapTarget.react"),{direction:"next",invisible:l,label:s,onClick:u,testid:void 0})}),b[42]=u,b[43]=l,b[44]=r):r=b[44];b[45]!==F||b[46]!==t||b[47]!==r?(s=m.jsx(c("MWXColumnItem.react"),{expanding:!0,verticalAlign:"center",children:m.jsxs(c("MWXRow.react"),{align:"justify",expanding:!0,paddingHorizontal:0,paddingVertical:0,spacingHorizontal:v?0:void 0,verticalAlign:"stretch",xstyle:E,children:[F,t,r]})}),b[45]=F,b[46]=t,b[47]=r,b[48]=s):s=b[48];b[49]!==w?(u=m.jsx(c("MWXColumnItem.react"),{children:m.jsx(c("MWChatAttachmentMediaThumbnails.react"),{getPreviewUrl:w})}),b[49]=w,b[50]=u):u=b[50];b[51]!==s||b[52]!==u?(l=m.jsxs(c("MWXColumn.react"),{align:"stretch",expanding:!0,paddingHorizontal:0,verticalAlign:"space-between",children:[s,u]}),b[51]=s,b[52]=u,b[53]=l):l=b[53];b[54]!==j||b[55]!==k||b[56]!==e||b[57]!==a||b[58]!==l?(E=m.jsxs(c("MWV2MediaViewerContainer.react"),{actions:k,shouldShowMessengerLogo:j,children:[e,a,l]}),b[54]=j,b[55]=k,b[56]=e,b[57]=a,b[58]=l,b[59]=E):E=b[59];F=E;if(g!=null&&!v){b[60]!==F||b[61]!==g?(t=m.jsx(c("CometHideLayerOnEscape.react"),{onHide:g,children:F}),b[60]=F,b[61]=g,b[62]=t):t=b[62];return t}else{if(B){r=v?g:void 0;b[63]!==F||b[64]!==r?(w=m.jsx(d("MWChatAttachmentMediaNavigationHotkeys.react").MWChatAttachmentMediaNavigationHotkeys,{onClose:r,children:F}),b[63]=F,b[64]=r,b[65]=w):w=b[65];return w}return F}}g["default"]=a}),226);
__d("useMWV2MediaViewerOpenDownloadUrl",["react","react-compiler-runtime","useMWV2MediaViewerOpenPlayableUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useMWV2MediaViewerOpenPlayableUrl")(),e;a[0]!==b?(e=function(a,c,d){a=b(a,c,d);if(a==null)return;c=new URL(a);c.searchParams.set("dl","1");return c.toString()},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("MWV2MediaViewerCutoverWrapper.react",["LSThreadMediaGalleryGroup","MWChatAttachmentMediaState.react","MWInboxMessageSearchStatusTypes","MWV2MediaViewerContext.react","cr:14186","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMWMediaGalleryRestoreStatus","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl","useMWV2MediaViewerSecurePreviewUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var e=d("react-compiler-runtime").c(30),f=a.children,g=a.initialAttachment,h=a.openThreadKey,k=a.secureThreadKey;a=a.threadType;var l;e[0]!==k||e[1]!==a?(l={threadKey:k,threadType:a},e[0]=k,e[1]=a,e[2]=l):l=e[2];b("cr:14186")(l);e[3]!==k||e[4]!==a?(l={threadKey:k,threadType:a},e[3]=k,e[4]=a,e[5]=l):l=e[5];l=c("useMWMediaGalleryRestoreStatus")(l);l=l===d("MWInboxMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS;var m;e[6]===Symbol["for"]("react.memo_cache_sentinel")?(m={entrypoint:"media_viewer"},e[6]=m):m=e[6];var n;e[7]===Symbol["for"]("react.memo_cache_sentinel")?(n=c("justknobx")._("3233"),e[7]=n):n=e[7];k=c("useMAWLoadMoreCutoverThreadSharedAttachments")(k,h,a,m,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,l,n);h=k.attachments;a=k.onLoadMore;var o=j,p=c("useMWV2MediaViewerOpenPreviewUrl")(),q=c("useMWV2MediaViewerOpenPlayableUrl")(),r=c("useMWV2MediaViewerOpenDownloadUrl")(),s=c("useMWV2MediaViewerSecurePreviewUrl")(),t=c("useMWV2MediaViewerSecurePlayableUrl")();e[8]!==p||e[9]!==s?(m=function(a,b,c){if(!a)return"";return!o(a)?p(a,b,c):s(a,b,c)},e[8]=p,e[9]=s,e[10]=m):m=e[10];l=m;e[11]!==q||e[12]!==t?(n=function(a,b,c){if(a==null)return"";return!o(a)?q(a,b,c):t(a,b,c)},e[11]=q,e[12]=t,e[13]=n):n=e[13];k=n;e[14]!==r||e[15]!==t?(m=function(a,b,c){if(a==null)return"";return!o(a)?r(a,b,c):t(a,b,c)},e[14]=r,e[15]=t,e[16]=m):m=e[16];n=m;e[17]!==h||e[18]!==f||e[19]!==k||e[20]!==l||e[21]!==g?(m=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:h,getIsSecureThread:o,getPlayableUrl:k,getPreviewUrl:l,initialAttachment:g,children:f}),e[17]=h,e[18]=f,e[19]=k,e[20]=l,e[21]=g,e[22]=m):m=e[22];e[23]!==h||e[24]!==n||e[25]!==k||e[26]!==l||e[27]!==a||e[28]!==m?(f=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:n,getPlayableUrl:k,getPreviewUrl:l,heroLoggingComponent:c("emptyFunction"),loadMore:a,media:h,children:m}),e[23]=h,e[24]=n,e[25]=k,e[26]=l,e[27]=a,e[28]=m,e[29]=f):f=e[29];return f}function j(a){return!((a==null?void 0:a.transportKey)==="FBBroker"||(a==null?void 0:a.transportKey)==="FBLegacyBroker")}g["default"]=a}),98);
__d("MWV2MediaViewerOpenWrapper.react",["CometHero.react","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMWMediaLoadingQplLogger","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(22),e=a.children,f=a.initialAttachment;a=a.thread;var g=d("MWSharedAttachmentsSectionHooks").useQueryMediaAttachments(a.threadKey),h=g[0],l=g[1],m=g[2];g=g[4];var n;b[0]!==a.threadType?(n={entrypoint:"media_viewer",threadType:a.threadType},b[0]=a.threadType,b[1]=n):n=b[1];n=c("useMWMediaLoadingQplLogger")(n);l=c("useLoadMoreThreadSharedAttachments.react")(l,a.threadKey,n.logLoadMediaStart);g=(a=g)!=null?a:!0;b[2]!==m||b[3]!==l||b[4]!==h||b[5]!==n.logLoadMediaCancel||b[6]!==n.logLoadMediaSuccess||b[7]!==g?(a={attachmentsRange:m,hasMore:g,loadMore:l,logLoadMediaCancel:n.logLoadMediaCancel,logLoadMediaSuccess:n.logLoadMediaSuccess,media:h},b[2]=m,b[3]=l,b[4]=h,b[5]=n.logLoadMediaCancel,b[6]=n.logLoadMediaSuccess,b[7]=g,b[8]=a):a=b[8];m=d("MWSharedAttachmentsSectionHooks").useLoader(a);l=m[1];n=c("useMWV2MediaViewerOpenPreviewUrl")();g=c("useMWV2MediaViewerOpenPlayableUrl")();a=c("useMWV2MediaViewerOpenDownloadUrl")();m=k;b[9]!==e||b[10]!==g||b[11]!==n||b[12]!==f||b[13]!==h?(m=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:h,getIsSecureThread:m,getPlayableUrl:g,getPreviewUrl:n,initialAttachment:f,children:e}),b[9]=e,b[10]=g,b[11]=n,b[12]=f,b[13]=h,b[14]=m):m=b[14];b[15]!==a||b[16]!==g||b[17]!==n||b[18]!==l||b[19]!==h||b[20]!==m?(e=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:a,getPlayableUrl:g,getPreviewUrl:n,heroLoggingComponent:j,loadMore:l,media:h,children:m}),b[15]=a,b[16]=g,b[17]=n,b[18]=l,b[19]=h,b[20]=m,b[21]=e):e=b[21];return e}function j(a){return i.jsx(c("CometHero.react"),{description:a})}j.displayName=j.name+" [from "+f.id+"]";function k(){return!1}g["default"]=a}),98);
__d("MWV2MediaViewerSecureWrapper.react",["LSThreadMediaGalleryGroup","MAWDbMsg","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","MWV2MediaViewerNullState.react","cr:14186","cr:5709","cr:5931","cr:5970","emptyFunction","justknobx","react","react-compiler-runtime","useMAWQuerySecureMediaAttachments","useMWMediaLoadingQplLogger","useMWV2MediaViewerSecurePlayableUrl","useMWV2MediaViewerSecurePreviewUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){return j}function j(){}var k=b("cr:5709")==null?a:b("cr:5709");function e(a){var e=d("react-compiler-runtime").c(34),f=a.children,g=a.initialAttachment;a=a.thread;var h=c("useMAWQuerySecureMediaAttachments")(a.threadKey),j=h[0],m=h[2],n=h[3];h=h[4];b("cr:14186")(a);var o=(h=h)!=null?h:!0;e[0]!==a.threadType?(h={entrypoint:"media_viewer",threadType:a.threadType},e[0]=a.threadType,e[1]=h):h=e[1];h=c("useMWMediaLoadingQplLogger")(h);if(e[2]!==(m==null?void 0:m.lastLoadedMessageId)){var p;p=(p=d("MAWDbMsg").toMsgId((p=m==null?void 0:m.lastLoadedMessageId)!=null?p:""))!=null?p:void 0;e[2]=m==null?void 0:m.lastLoadedMessageId;e[3]=p}else p=e[3];var q;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(q=c("justknobx")._("3233"),e[4]=q):q=e[4];e[5]!==o||e[6]!==n||e[7]!==h||e[8]!==p||e[9]!==a.threadKey?(q={earliestLoadedMediaMessageId:p,hasMoreBefore:o,mediaGalleryGroup:c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,minTimestampMs:n,pageSize:q,qplLogger:h,threadKey:a.threadKey},e[5]=o,e[6]=n,e[7]=h,e[8]=p,e[9]=a.threadKey,e[10]=q):q=e[10];var r=k(q);e[11]!==o||e[12]!==r?(n=function(){o&&r()},e[11]=o,e[12]=r,e[13]=n):n=e[13];p=n;e[14]!==m||e[15]!==o||e[16]!==p||e[17]!==j||e[18]!==h.logLoadMediaCancel||e[19]!==h.logLoadMediaSuccess?(a={attachmentsRange:m,hasMore:o,loadMore:p,logLoadMediaCancel:h.logLoadMediaCancel,logLoadMediaSuccess:h.logLoadMediaSuccess,media:j},e[14]=m,e[15]=o,e[16]=p,e[17]=j,e[18]=h.logLoadMediaCancel,e[19]=h.logLoadMediaSuccess,e[20]=a):a=e[20];q=d("MWSharedAttachmentsSectionHooks").useLoader(a);n=q[1];m=c("useMWV2MediaViewerSecurePreviewUrl")();p=c("useMWV2MediaViewerSecurePlayableUrl")();h=l;if(b("cr:5970")==null||b("cr:5931")==null){e[21]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("MWV2MediaViewerNullState.react"),{}),e[21]=a):a=e[21];return a}e[22]!==f||e[23]!==p||e[24]!==m||e[25]!==g||e[26]!==j?(q=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:j,getIsSecureThread:h,getPlayableUrl:p,getPreviewUrl:m,initialAttachment:g,children:f}),e[22]=f,e[23]=p,e[24]=m,e[25]=g,e[26]=j,e[27]=q):q=e[27];e[28]!==p||e[29]!==m||e[30]!==n||e[31]!==j||e[32]!==q?(a=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:p,getPlayableUrl:p,getPreviewUrl:m,heroLoggingComponent:c("emptyFunction"),loadMore:n,media:j,children:q}),e[28]=p,e[29]=m,e[30]=n,e[31]=j,e[32]=q,e[33]=a):a=e[33];return a}function l(){return!0}g["default"]=e}),98);
__d("MWV2MediaViewer.react",["FBLogger","FocusRegion.react","FocusWithinHandler.react","I64","LSMessagingThreadTypeUtil","MAWMediaGalleryM2Utils","MAWThreadCutover","MWFocusTable.react","MWLSThread","MWLSThreadDisplayContext","MWPThreadCapabilitiesContext","MWV2MediaViewerContent.react","MWV2MediaViewerCutoverWrapper.react","MWV2MediaViewerNullState.react","MWV2MediaViewerOpenWrapper.react","MWV2MediaViewerSecureWrapper.react","XPlatReactFocusRegion.react","cr:4482","focusScopeQueries","gkx","justknobx","react","react-compiler-runtime","requireDeferred","useMWMediaViewerOpenQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;e.useCallback;var k=e.useEffect,l=e.useId,m=c("requireDeferred")("MAWFTSRestoreSync").__setRef("MWV2MediaViewer.react");function a(a){var e=d("react-compiler-runtime").c(83),f=a.attachment,g=a.onClose;a=a.shouldShowMessengerLogo;var h=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger(),n=h.endSuccess,o;e[0]!==n?(h=function(){n()},o=[n],e[0]=n,e[1]=h,e[2]=o):(h=e[1],o=e[2]);k(h,o);h=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();var p=h==="ChatTab";e[3]!==p?(o=function(){if(!c("justknobx")._("3195")||!d("MAWMediaGalleryM2Utils").isMediaGalleryM2Enabled())return;m.onReady(function(a){a=a.getFTSRestoreSync;a=a();p&&(a.setIsStarted(!1),a.setShouldPauseRestore(!0))})},e[3]=p,e[4]=o):o=e[4];var q=o;h=d("MWLSThread").useThread(f.threadKey);o=d("MWPThreadCapabilitiesContext").Provider;var r=l(),s;e[5]!==r?(s=function(a){a||d("FocusRegion.react").focusRegionById(r,d("MWFocusTable.react").tabbableScopeQuery)},e[5]=r,e[6]=s):s=e[6];s=s;var t=d("MAWThreadCutover").useGetCutoverOpenThreadKey(f.threadKey),u=d("MAWThreadCutover").useCutoverSecureThreadKeyForOpenThreadKey(t==null?f.threadKey:void 0);if(h==null){c("FBLogger")("messenger_web_media").mustfix("Thread is null in media viewer for attachment with threadKey: %s",(i||(i=d("I64"))).to_string(f.threadKey));var v;e[7]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("MWV2MediaViewerNullState.react"),{}),e[7]=v):v=e[7];return v}v=d("LSMessagingThreadTypeUtil").isArmadilloSecure(h.threadType);if(b("cr:4482")!=null){var w=u!=null?u:h.threadKey,x;e[8]!==g||e[9]!==q?(x=function(){q(),g&&g()},e[8]=g,e[9]=q,e[10]=x):x=e[10];var y;e[11]!==f||e[12]!==a||e[13]!==x||e[14]!==h?(y=j.jsx(c("MWV2MediaViewerContent.react"),{initialAttachment:f,onClose:x,shouldShowMessengerLogo:a,thread:h}),e[11]=f,e[12]=a,e[13]=x,e[14]=h,e[15]=y):y=e[15];e[16]!==f||e[17]!==w||e[18]!==y||e[19]!==h.threadType?(x=j.jsx(b("cr:4482"),{initialAttachment:f,secureThreadKey:w,threadType:h.threadType,children:y}),e[16]=f,e[17]=w,e[18]=y,e[19]=h.threadType,e[20]=x):x=e[20];w=x;e[21]!==w||e[22]!==h?(y=c("gkx")("1372")?j.jsx(o,{thread:h,children:w}):w,e[21]=w,e[22]=h,e[23]=y):y=e[23];x=y;e[24]!==x||e[25]!==r?(w=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:r,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:x}),e[24]=x,e[25]=r,e[26]=w):w=e[26];y=w;e[27]!==y||e[28]!==s?(x=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:s,onFocusVisibleChange:s,children:y}):y,e[27]=y,e[28]=s,e[29]=x):x=e[29];return x}if(t!=null||u!=null){w=t!=null?t:h.threadKey;y=u!=null?u:h.threadKey;e[30]!==g||e[31]!==q?(x=function(){q(),g&&g()},e[30]=g,e[31]=q,e[32]=x):x=e[32];e[33]!==f||e[34]!==a||e[35]!==x||e[36]!==h?(t=j.jsx(c("MWV2MediaViewerContent.react"),{initialAttachment:f,onClose:x,shouldShowMessengerLogo:a,thread:h}),e[33]=f,e[34]=a,e[35]=x,e[36]=h,e[37]=t):t=e[37];e[38]!==f||e[39]!==w||e[40]!==y||e[41]!==t||e[42]!==h.threadType?(u=j.jsx(c("MWV2MediaViewerCutoverWrapper.react"),{initialAttachment:f,openThreadKey:w,secureThreadKey:y,threadType:h.threadType,children:t}),e[38]=f,e[39]=w,e[40]=y,e[41]=t,e[42]=h.threadType,e[43]=u):u=e[43];x=u;e[44]!==x||e[45]!==h?(w=c("gkx")("1372")?j.jsx(o,{thread:h,children:x}):x,e[44]=x,e[45]=h,e[46]=w):w=e[46];y=w;e[47]!==y||e[48]!==r?(t=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:r,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:y}),e[47]=y,e[48]=r,e[49]=t):t=e[49];u=t;e[50]!==u||e[51]!==s?(x=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:s,onFocusVisibleChange:s,children:u}):u,e[50]=u,e[51]=s,e[52]=x):x=e[52];return x}if(v){e[53]!==g||e[54]!==q?(w=function(){q(),g&&g()},e[53]=g,e[54]=q,e[55]=w):w=e[55];e[56]!==f||e[57]!==a||e[58]!==w||e[59]!==h?(y=j.jsx(c("MWV2MediaViewerContent.react"),{initialAttachment:f,onClose:w,shouldShowMessengerLogo:a,thread:h}),e[56]=f,e[57]=a,e[58]=w,e[59]=h,e[60]=y):y=e[60];e[61]!==f||e[62]!==y||e[63]!==h?(t=j.jsx(c("MWV2MediaViewerSecureWrapper.react"),{initialAttachment:f,thread:h,children:y}),e[61]=f,e[62]=y,e[63]=h,e[64]=t):t=e[64];u=t;e[65]!==u||e[66]!==h?(x=c("gkx")("1372")?j.jsx(o,{thread:h,children:u}):u,e[65]=u,e[66]=h,e[67]=x):x=e[67];v=x;e[68]!==v||e[69]!==r?(w=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:r,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:v}),e[68]=v,e[69]=r,e[70]=w):w=e[70];y=w;e[71]!==y||e[72]!==s?(t=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:s,onFocusVisibleChange:s,children:y}):y,e[71]=y,e[72]=s,e[73]=t):t=e[73];return t}e[74]!==f||e[75]!==g||e[76]!==a||e[77]!==h?(o=j.jsx(c("MWV2MediaViewerContent.react"),{initialAttachment:f,onClose:g,shouldShowMessengerLogo:a,thread:h}),e[74]=f,e[75]=g,e[76]=a,e[77]=h,e[78]=o):o=e[78];e[79]!==f||e[80]!==o||e[81]!==h?(u=j.jsx(c("MWV2MediaViewerOpenWrapper.react"),{initialAttachment:f,thread:h,children:o}),e[79]=f,e[80]=o,e[81]=h,e[82]=u):u=e[82];return u}g["default"]=a}),98);
__d("MWV2MediaViewerAspectRatioContainer.react",["BaseAspectRatioContainer.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={containerMaxSize:function(a,b){var c;return[{aspectRatio:b==null?null:"x1f7gzso",marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxHeight:"min(calc(100vh - 76px),"+((c=a)!=null?c:1e4)+"px)"==null?null:"x1kb659o",$$css:!0},{"--aspectRatio":b!=null?b:void 0,"--maxHeight":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}("min(calc(100vh - 76px),"+((c=a)!=null?c:1e4)+"px)")}]}};function a(a){var b=d("react-compiler-runtime").c(14),e=a.children,f=a.height,g=a.onClickOutsideOfChildren;a=a.width;a=a!=null&&f!=null?a/f:1;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x5yr21d xh8yej3"},b[0]=i):i=b[0];var m;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(m={className:"x1m82ljr x8cgc45 xr1yuqi xkrivgy x4ii5y1 x1gryazu x1n2onr6 xtzzx4i xwa60dl x11lhmoz"},b[1]=m):m=b[1];var n;b[2]!==a||b[3]!==f?(n=(h||(h=c("stylex"))).props(k.containerMaxSize(f,a)),b[2]=a,b[3]=f,b[4]=n):n=b[4];b[5]!==a||b[6]!==e?(f=j.jsx(c("BaseAspectRatioContainer.react"),{aspectRatio:a,children:e}),b[5]=a,b[6]=e,b[7]=f):f=b[7];b[8]!==n||b[9]!==f?(a=j.jsx("div",babelHelpers["extends"]({},m,{children:j.jsx("div",babelHelpers["extends"]({},n,{"aria-hidden":!0,onClick:l,children:f}))})),b[8]=n,b[9]=f,b[10]=a):a=b[10];b[11]!==g||b[12]!==a?(e=j.jsx("div",babelHelpers["extends"]({"aria-hidden":!0},i,{onClick:g,children:a})),b[11]=g,b[12]=a,b[13]=e):e=b[13];return e}function l(a){a.cancelBubble=!0,a.stopPropagation()}g["default"]=a}),98);
__d("MWV2MediaViewerItemImageV2.react",["fbt","BaseImage.react","I64","MWAnimatedImageControlsUtil","MWAnimatedImageThumbnailWithPlayButton.react","MWV2MediaViewerAspectRatioContainer.react","MWV2MediaViewerContext.react","MWXIconHd","MWXIconStrict.react","MWXPressable.react","MWXThreadThemeColor","MessagingAttachmentType","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useContext,m=b.useEffect,n=b.useRef,o=b.useState;function a(a){var b=d("react-compiler-runtime").c(36),e=a.attachment,f=a.mediaRenderQpl;a=a.onClickOutsideOfImage;var g=d("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting(),i=l(d("MWV2MediaViewerContext.react").context),q=i.getPlayableUrl;i=i.heroLoggingComponent;var r=n(null),s=o(!1),t=s[0],u=s[1],v;b[0]!==f?(s=function(){var a;r.current!=null&&((a=r.current)==null?void 0:a.complete)&&f.endSuccess()},v=[f],b[0]=f,b[1]=s,b[2]=v):(s=b[1],v=b[2]);m(s,v);b[3]!==e.previewHeight||b[4]!==e.previewHeightLarge?(s=e.previewHeightLarge!=null?(j||(j=d("I64"))).to_float(e.previewHeightLarge):e.previewHeight!=null?(j||(j=d("I64"))).to_float(e.previewHeight):void 0,b[3]=e.previewHeight,b[4]=e.previewHeightLarge,b[5]=s):s=b[5];v=s;b[6]!==e.previewWidth||b[7]!==e.previewWidthLarge?(s=e.previewWidthLarge!=null?(j||(j=d("I64"))).to_float(e.previewWidthLarge):e.previewWidth!=null?(j||(j=d("I64"))).to_float(e.previewWidth):void 0,b[6]=e.previewWidth,b[7]=e.previewWidthLarge,b[8]=s):s=b[8];s=s;var w=(j||(j=d("I64"))).to_int32(e.attachmentType)===c("MessagingAttachmentType").ANIMATED_IMAGE,x;b[9]!==w?(x=w&&d("MWAnimatedImageControlsUtil").getShouldEnableGIFPlayPause(),b[9]=w,b[10]=x):x=b[10];w=x;b[11]!==e||b[12]!==q||b[13]!==f?(x=q(e,"MediaViewerImage",f),b[11]=e,b[12]=q,b[13]=f,b[14]=x):x=b[14];q=x;if(q!=null){var y=w&&g!==!0;b[15]!==i?(x=i("MWV2MediaViewerImage"),b[15]=i,b[16]=x):x=b[16];b[17]!==e||b[18]!==y||b[19]!==v||b[20]!==t||b[21]!==f||b[22]!==q||b[23]!==s?(w=y!=null&&y===!0?t===!1?k.jsx(c("MWAnimatedImageThumbnailWithPlayButton.react"),{connectBottom:!1,connectTop:!1,dbAttachment:e,isInMediaViewer:!0,isInThread:!1,mediaRenderQpl:f,message:null,onPlay:function(){return u(!0)},outgoing:!1,previewHeight:v,previewWidth:s}):k.jsx(c("MWXPressable.react"),{"aria-label":h._(/*BTDS*/"__JHASH__210-OYWdJBG__JHASH__"),onPress:function(){y&&u(!1)},children:k.jsx(c("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){f.endFail("load-image-error")},onLoad:function(){f.endSuccess()},ref:r,src:q,width:"100%"})}):k.jsx(c("BaseImage.react"),{height:"100%",objectFit:"contain",onError:function(){f.endFail("load-image-error")},onLoad:function(){f.endSuccess()},ref:r,src:q,width:"100%"}),b[17]=e,b[18]=y,b[19]=v,b[20]=t,b[21]=f,b[22]=q,b[23]=s,b[24]=w):w=b[24];b[25]!==e?(g=k.jsx(p,{attachment:e}),b[25]=e,b[26]=g):g=b[26];b[27]!==x||b[28]!==w||b[29]!==g?(i=k.jsxs(k.Fragment,{children:[x,w,g]}),b[27]=x,b[28]=w,b[29]=g,b[30]=i):i=b[30];b[31]!==v||b[32]!==a||b[33]!==i||b[34]!==s?(t=k.jsx(c("MWV2MediaViewerAspectRatioContainer.react"),{height:v,onClickOutsideOfChildren:a,width:s,children:i}),b[31]=v,b[32]=a,b[33]=i,b[34]=s,b[35]=t):t=b[35];return t}else{f.endFail("missing-playable-url");return null}}function p(a){var b=d("react-compiler-runtime").c(3);a=a.attachment;a=a;a=a.isHd===!0;if(!a)return null;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x78zum5 x5yr21d x10l6tqk xh8yej3"},e={className:"x92rtbv x10l6tqk xomnu4r"},b[0]=a,b[1]=e):(a=b[0],e=b[1]);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",babelHelpers["extends"]({},a,{children:k.jsx("div",babelHelpers["extends"]({},e,{children:k.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:c("MWXIconHd"),size:24})}))})),b[2]=a):a=b[2];return a}g["default"]=a}),226);
__d("MWV2MediaViewerThreadCutoverWrapper.react",["LSThreadMediaGalleryGroup","MWChatAttachmentMediaState.react","MWV2MediaViewerContext.react","cr:14186","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl","useMWV2MediaViewerSecurePreviewUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var e=d("react-compiler-runtime").c(27),f=a.children,g=a.initialAttachment,h=a.openThreadKey,k=a.secureThreadKey;a=a.threadType;var l;e[0]!==k||e[1]!==a?(l={threadKey:k,threadType:a},e[0]=k,e[1]=a,e[2]=l):l=e[2];b("cr:14186")(l);e[3]===Symbol["for"]("react.memo_cache_sentinel")?(l={entrypoint:"media_viewer"},e[3]=l):l=e[3];var m;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(m=c("justknobx")._("3233"),e[4]=m):m=e[4];k=c("useMAWLoadMoreCutoverThreadSharedAttachments")(k,h,a,l,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,!1,m);h=k.attachments;a=k.onLoadMore;var n=j,o=c("useMWV2MediaViewerOpenPreviewUrl")(),p=c("useMWV2MediaViewerOpenPlayableUrl")(),q=c("useMWV2MediaViewerOpenDownloadUrl")(),r=c("useMWV2MediaViewerSecurePreviewUrl")(),s=c("useMWV2MediaViewerSecurePlayableUrl")();e[5]!==o||e[6]!==r?(l=function(a,b,c){if(!a)return"";return!n(a)?o(a,b,c):r(a,b,c)},e[5]=o,e[6]=r,e[7]=l):l=e[7];m=l;e[8]!==p||e[9]!==s?(k=function(a,b,c){if(a==null)return"";return!n(a)?p(a,b,c):s(a,b,c)},e[8]=p,e[9]=s,e[10]=k):k=e[10];l=k;e[11]!==q||e[12]!==s?(k=function(a,b,c){if(a==null)return"";return!n(a)?q(a,b,c):s(a,b,c)},e[11]=q,e[12]=s,e[13]=k):k=e[13];k=k;var t;e[14]!==h||e[15]!==f||e[16]!==l||e[17]!==m||e[18]!==g?(t=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:h,getIsSecureThread:n,getPlayableUrl:l,getPreviewUrl:m,initialAttachment:g,children:f}),e[14]=h,e[15]=f,e[16]=l,e[17]=m,e[18]=g,e[19]=t):t=e[19];e[20]!==h||e[21]!==k||e[22]!==l||e[23]!==m||e[24]!==a||e[25]!==t?(f=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:k,getPlayableUrl:l,getPreviewUrl:m,heroLoggingComponent:c("emptyFunction"),loadMore:a,media:h,children:t}),e[20]=h,e[21]=k,e[22]=l,e[23]=m,e[24]=a,e[25]=t,e[26]=f):f=e[26];return f}function j(a){return!((a==null?void 0:a.transportKey)==="FBBroker"||(a==null?void 0:a.transportKey)==="FBLegacyBroker")}g["default"]=a}),98);